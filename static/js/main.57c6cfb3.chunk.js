(this["webpackJsonpreact-first-project"]=this["webpackJsonpreact-first-project"]||[]).push([[0],{150:function(e,t,n){},151:function(e,t,n){},16:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(118),s=r.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"64e333df-e9d0-4115-b50f-b08967237296"}}),a={getProfile:function(e){return s.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return s.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return s.put("profile/status",{status:e}).then((function(e){return e.data}))},updateProfilePhoto:function(e){var t=new FormData;return t.append("image",e),s.put("profile/photo",t).then((function(e){return e.data}))},updateProfileData:function(e){return s.put("profile",e).then((function(e){return e.data}))}},i={getPages:function(e,t){return s.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},setPage:function(e,t){return s.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollow:function(e){return s.delete("follow/".concat(e)).then((function(e){return e.data}))},follow:function(e){return s.post("follow/".concat(e)).then((function(e){return e.data}))}},c={isAuth:function(){return s.get("auth/me").then((function(e){return e.data}))},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return s.post("auth/login",{captcha:e,email:t,password:n,rememberMe:r}).then((function(e){return e.data}))},logout:function(){return s.delete("auth/login").then((function(e){return e.data}))},getCaptchaUrl:function(){return s.get("security/get-captcha-url").then((function(e){return e.data}))}}},25:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var r=n(3),s=n(85),a=(n(1),n(0)),i=["input","meta"],c=["input","meta"],o=function(e){var t=e.input,n=e.meta,c=Object(s.a)(e,i),o=n.touched&&n.error;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:o?"validate__post validate__post_body":"",children:Object(a.jsx)("textarea",Object(r.a)(Object(r.a)({},t),c))}),o&&Object(a.jsx)("div",{className:o?"validate__post validate__post_span":"",children:n.error})]})},u=function(e){var t=e.input,n=e.meta,i=Object(s.a)(e,c),o=n.touched&&n.error;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:o?"validate__login validate__login_body":"",children:Object(a.jsx)("input",Object(r.a)(Object(r.a)({},t),i))}),o&&Object(a.jsx)("div",{className:o?"validate__login validate__login_span":"",children:n.error})]})}},275:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(60),i=n.n(a),c=(n(150),n.p,n(151),n(11)),o=n(14),u=n(0),l=function(){return Object(u.jsx)("nav",{className:"navbar",children:Object(u.jsxs)("ul",{className:"navbar__list",children:[Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/profile",className:"navbar__item",activeClassName:"navbar__item_active",children:"Profile"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/users",className:"navbar__item",activeClassName:"navbar__item_active",children:"Users"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/dialogs",className:"navbar__item",activeClassName:"navbar__item_active",children:"Dialogs"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/music",className:"navbar__item",activeClassName:"navbar__item_active",children:"Music"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/settings",className:"navbar__item",activeClassName:"navbar__item_active",children:"Settings"})})]})})},d=function(){return Object(u.jsx)("div",{className:"dialogs",children:"Music"})},f=function(){return Object(u.jsx)("div",{className:"dialogs",children:"Settings"})},j=n(12),b=n(7),p=n.n(b),h=n(13),g=n(36),O=n(3),m=n(16),x="users/SUBSCRIBE",v="users/UNSUBSCRIBE",_="users/SET-USERS",N="users/SET-PAGE-NUMBER",P="users/SET-TOTAL-USERS-COUNT",w="users/TOGGLE-FETCHING",S="users/FOLLOWING-IN-PROGRESS",C={users:[],pageSize:50,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},k=function(e){return{type:x,userId:e}},E=function(e){return{type:v,userId:e}},y=function(e){return{type:_,users:e}},M=function(e){return{type:w,isFetching:e}},I=function(e,t){return{type:S,inProgress:e,userId:t}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(O.a)(Object(O.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(O.a)(Object(O.a)({},e),{},{followed:!0}):e}))});case v:return Object(O.a)(Object(O.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(O.a)(Object(O.a)({},e),{},{followed:!1}):e}))});case _:return Object(O.a)(Object(O.a)({},e),{},{users:Object(g.a)(t.users)});case N:return Object(O.a)(Object(O.a)({},e),{},{currentPage:t.pageNumber});case P:return Object(O.a)(Object(O.a)({},e),{},{totalUsersCount:t.usersCount});case w:return Object(O.a)(Object(O.a)({},e),{},{isFetching:t.isFetching});case S:return Object(O.a)(Object(O.a)({},e),{},{followingInProgress:t.inProgress?[].concat(Object(g.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},D=n(51),A=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],s=1;s<=t;s++)n.push(s);var a=Math.ceil(t/10),i=Object(r.useState)(1),c=Object(D.a)(i,2),o=c[0],l=c[1],d=10*(o-1)+1,f=10*o;return Object(u.jsxs)("div",{children:[o>1&&Object(u.jsx)("button",{onClick:function(){return l(o-1)},children:"PREV"}),n.filter((function(e){return e>=d&&e<=f})).map((function(t){return Object(u.jsx)("button",{className:e.currentPage===t?"users__page users__page_active":"users__page ",onClick:function(){return e.onPageChanged(t)},children:t})})),a>o&&Object(u.jsx)("button",{onClick:function(){return l(o+1)},children:"NEXT"})]})},T=n.p+"static/media/user-logo.c3bf08ee.png",F=function(e){return Object(u.jsxs)("div",{className:"user",children:[Object(u.jsxs)("div",{className:"user__action",children:[Object(u.jsx)(o.b,{to:"profile/".concat(e.user.id),children:Object(u.jsx)("img",{src:null!=e.user.photos.small?e.user.photos.small:T,alt:"avatar",className:"user__avatar"})}),e.user.followed?Object(u.jsx)("button",{disabled:e.followingInProgress.some((function(t){return t===e.user.id})),onClick:function(){e.unsubscribe(e.user.id)},className:"user__btn",children:"Unfollow"}):Object(u.jsx)("button",{disabled:e.followingInProgress.some((function(t){return t===e.user.id})),onClick:function(){e.subscribe(e.user.id)},className:"user__btn",children:"Follow"})]}),Object(u.jsxs)("div",{className:"user__info",children:[Object(u.jsxs)("div",{className:"user__descr",children:[Object(u.jsx)("div",{className:"user__descr-name",children:e.user.name}),Object(u.jsx)("div",{className:"user__descr-status",children:e.user.status})]}),Object(u.jsxs)("div",{className:"user__location",children:[Object(u.jsx)("div",{className:"user__location-country",children:"user.location.country"}),Object(u.jsx)("div",{className:"user__location-city",children:"user.location.city"})]})]})]})},z=function(e){return Object(u.jsxs)("div",{className:"users",children:[Object(u.jsx)(A,{currentPage:e.currentPage,onPageChanged:e.onPageChanged,totalUsersCount:e.totalUsersCount,pageSize:e.pageSize}),e.users.map((function(t){return Object(u.jsx)(F,{user:t,followingInProgress:e.followingInProgress,unsubscribe:e.unsubscribe,subscribe:e.subscribe})}))]})},L=function(e){return Object(u.jsx)("div",{className:"preloader",children:Object(u.jsx)("div",{className:"spinner"})})},R=function(e){return{isAuth:e.auth.isAuth}},G=function(e){return Object(j.b)(R)((function(t){return t.isAuth?Object(u.jsx)(e,Object(O.a)({},t)):Object(u.jsx)(c.a,{to:"/login"})}))},V=n(10),B=Object(V.d)(Object(j.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),(function(e){return{subscribe:function(t){return e(function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(I(!0,e)),t.next=3,m.c.follow(e);case 3:0===t.sent.resultCode&&n(k(e)),n(I(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},unsubscribe:function(t){return e(function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(I(!0,e)),t.next=3,m.c.unfollow(e);case 3:0===t.sent.resultCode&&n(E(e)),n(I(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},getUsers:function(t,n){return e(function(e,t){return function(){var n=Object(h.a)(p.a.mark((function n(r){var s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(M(!0)),n.next=3,m.c.getPages(e,t);case 3:s=n.sent,r(y(s.items)),r((a=s.totalCount,{type:P,usersCount:a})),r(M(!1));case 7:case"end":return n.stop()}var a}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))},changedPage:function(t,n){return e(function(e,t){return function(){var n=Object(h.a)(p.a.mark((function n(r){var s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:N,pageNumber:e}),r(M(!0)),n.next=4,m.c.setPage(e,t);case 4:s=n.sent,r(y(s.items)),r(M(!1));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}})))((function(e){Object(r.useEffect)((function(){e.getUsers(e.currentPage,e.pageSize)}),[]);return Object(u.jsxs)(u.Fragment,{children:[e.isFetching?Object(u.jsx)(L,{}):null,Object(u.jsx)(z,{totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:function(t){e.changedPage(t,e.pageSize)},users:e.users,unsubscribe:e.unsubscribe,subscribe:e.subscribe,followingInProgress:e.followingInProgress,toggleFollowingProgress:e.toggleFollowingProgress})]})})),H=n(28),J="profile/SET-USER-PROFILE",Y="profile/SET-STATUS",W="profile/UPDATE-STATUS",X="profile/ADD-NEW-POST",q="profile/SET-PROFILE-PHOTO",K="profile/SET-EDIT-MODE-PROFILE",Z={profile:null,postsData:[{text:"Hi!",id:1,likeCount:24},{text:"Yo!",id:2,likeCount:32},{text:"Olla!",id:3,likeCount:48}],postTextareaValue:"",userStatus:"",editMode:!1},Q=function(e){return{type:Y,status:e}},$=function(e){return{type:q,photo:e}},ee=function(e){return{type:K,editMode:e}},te=function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.b.getProfile(e);case 2:r=t.sent,n({type:J,profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(O.a)(Object(O.a)({},e),{},{profile:t.profile});case Y:case W:return Object(O.a)(Object(O.a)({},e),{},{userStatus:t.status});case X:var n={text:t.text,id:e.postsData.length+1,likeCount:0};return Object(O.a)(Object(O.a)({},e),{},{postsData:[].concat(Object(g.a)(e.postsData),[n])});case q:return Object(O.a)(Object(O.a)({},e),{},{profile:Object(O.a)(Object(O.a)({},e.profile),{},{photos:Object(O.a)(Object(O.a)({},e.profile.photos),{},{small:t.photo,large:t.photo})})});case K:return Object(O.a)(Object(O.a)({},e),{},{editMode:t.editMode});default:return e}},re=n(115),se=n(116),ae=n(25),ie=n(35),ce=Object(ie.a)(10),oe=Object(se.a)({form:"addPost"})((function(e){return Object(u.jsxs)("form",{className:"posts__add",onSubmit:e.handleSubmit,children:[Object(u.jsx)(re.a,{className:"posts__text",component:ae.b,name:"newPostText",cols:"60",rows:"5",placeholder:"Enter the text",validate:[ce,ie.b]}),Object(u.jsx)("button",{className:"posts__publish",children:"Add Post"})]})})),ue=function(e){return Object(u.jsxs)("div",{className:"like",children:[Object(u.jsx)("img",{src:"https://www.pinclipart.com/picdir/big/48-486837_thumbs-up-thumbs-up-icon-font-awesome-clipart.png",alt:"like",className:"like__icon"}),Object(u.jsx)("div",{className:"like__count",children:e.count})]})},le=function(e){return Object(u.jsxs)("div",{className:"post",children:[Object(u.jsx)("img",{src:"https://pixelbox.ru/wp-content/uploads/2020/12/avatar-youtube-10.jpg",alt:"avatar",className:"post__avatar"}),Object(u.jsx)("div",{className:"post__text",children:e.text}),Object(u.jsx)(ue,{count:e.likeCount})]})},de=function(e){var t=e.posts.map((function(e){return Object(u.jsx)(le,{text:e.text,id:e.id,likeCount:e.likeCount})}));return Object(u.jsxs)("div",{className:"posts",children:[Object(u.jsx)("h3",{className:"posts__header",children:"Posts"}),Object(u.jsx)(oe,{onSubmit:function(t){e.addNewPost(t.newPostText)}}),t]})},fe=Object(j.b)((function(e){return{posts:e.profilePage.postsData,postTextareaValue:e.profilePage.postTextareaValue}}),(function(e){return{addNewPost:function(t){e(function(e){return{type:X,text:e}}(t))}}}))((function(e){return Object(u.jsx)(de,{posts:e.posts,postTextareaValue:e.postTextareaValue,addNewPost:e.addNewPost})})),je=function(e){return Object(u.jsxs)("div",{className:"avatar",children:[Object(u.jsx)("img",{src:null!=e.profile.photos.large?e.profile.photos.large:T,alt:"avatar",className:"avatar__img"}),e.isOwner&&Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{class:"visually-hidden",type:"file",id:"file",onChange:function(t){t.target.files.length&&e.setProfilePhoto(t.target.files[0])}}),Object(u.jsx)("button",{className:"avatar__btn",children:Object(u.jsx)("label",{for:"file",children:"Choose avatar"})})]})]})},be=Object(se.a)({form:"profileData"})((function(e){return Object(u.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(u.jsx)("button",{children:"Save"}),e.error&&Object(u.jsx)("div",{className:"validate__login_invalid-data",children:e.error}),Object(u.jsx)(re.a,{component:ae.a,className:"login__form-item",placeholder:"Full name",name:"fullName",validate:[ie.b]}),Object(u.jsx)(re.a,{component:ae.a,className:"login__form-item",placeholder:"About me",name:"aboutMe",validate:[ie.b]}),Object(u.jsxs)("div",{className:"login__form-item",children:["Looking for a job:",Object(u.jsx)(re.a,{component:"Input",type:"checkbox",name:"lookingForAJob"})]}),Object(u.jsx)(re.a,{component:ae.a,className:"login__form-item",placeholder:"Desciption",name:"lookingForAJobDescription",validate:[ie.b]}),Object(u.jsx)("div",{children:Object(u.jsx)("b",{children:"Contacts:"})}),Object(u.jsx)(re.a,{component:ae.a,className:"login__form-item",placeholder:"Facebook",name:"contacts.facebook"}),Object(u.jsx)(re.a,{component:ae.a,className:"login__form-item",placeholder:"Instagram",name:"contacts.instagram"}),Object(u.jsx)(re.a,{component:ae.a,className:"login__form-item",placeholder:"Github",name:"contacts.github"})]})})),pe=function(e){var t=Object(r.useState)(!1),n=Object(D.a)(t,2),s=n[0],a=n[1],i=Object(r.useState)(e.userStatus),c=Object(D.a)(i,2),o=c[0],l=c[1],d=function(){a(!0)};return Object(r.useEffect)((function(){l(e.userStatus)}),[e.userStatus]),s?Object(u.jsxs)("div",{onClick:d,className:"profile-info__descr-item",children:["Status:"," ",Object(u.jsx)("input",{onBlur:function(){a(!1),e.updateUserStatus(o)},onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,value:o})]}):Object(u.jsx)("div",{onClick:d,className:"profile-info__descr-item",children:e.userStatus?"Status: ".concat(e.userStatus):"\u0421lick here to set the status"})},he=function(e){return Object(u.jsxs)("div",{children:[e.isOwner&&Object(u.jsx)("button",{onClick:e.activeEditMode,children:"Edit"}),Object(u.jsxs)("div",{className:"profile-info__descr-item",children:["Fullname: ",e.profile.fullName]}),e.profile.aboutMe?Object(u.jsxs)("div",{className:"profile-info__descr-item",children:["About me: ",e.profile.aboutMe]}):"",Object(u.jsxs)("div",{className:"profile-info__descr-item",children:["Looking for a job: ",e.profile.lookingForAJob?"Yes":"No"]}),e.profile.lookingForAJob?Object(u.jsxs)("div",{className:"profile-info__descr-item",children:["Description: ",e.profile.lookingForAJobDescription]}):"",Object(u.jsx)("div",{className:"profile-info__descr-item",children:Object(u.jsx)("b",{children:"Contacts:"})}),e.profile.contacts.facebook&&Object(u.jsxs)("div",{className:"profile-info__descr-item__facebook",children:["Facebook: ",e.profile.contacts.facebook]}),e.profile.contacts.instagram&&Object(u.jsxs)("div",{className:"profile-info__descr-item__instagram",children:["Instagram: ",e.profile.contacts.instagram]}),e.profile.contacts.github&&Object(u.jsxs)("div",{className:"profile-info__descr-item__github",children:["Git: ",e.profile.contacts.github]})]})},ge=function(e){return Object(u.jsxs)("div",{className:"profile-info__descr",children:[e.editMode?Object(u.jsx)(be,{initialValues:e.profile,onSubmit:function(t){e.setProfileData(t)}}):Object(u.jsx)(he,{isOwner:e.isOwner,activeEditMode:function(){e.setEditModeProfile(!0)},profile:e.profile}),Object(u.jsx)(pe,{isOwner:e.isOwner,userStatus:e.userStatus,updateUserStatus:e.updateUserStatus})]})},Oe=function(e){return e.profile?Object(u.jsxs)("div",{className:"profile-info",children:[Object(u.jsx)(je,{profile:e.profile,isOwner:e.isOwner,setProfilePhoto:e.setProfilePhoto}),Object(u.jsx)(ge,{isOwner:e.isOwner,userId:e.userId,profile:e.profile,userStatus:e.userStatus,updateUserStatus:e.updateUserStatus,setProfileData:e.setProfileData,editMode:e.editMode,setEditModeProfile:e.setEditModeProfile})]}):Object(u.jsx)(L,{})},me=function(e){return Object(u.jsxs)("div",{className:"profile",children:[Object(u.jsx)(Oe,{isOwner:e.isOwner,profile:e.profile,userStatus:e.userStatus,updateUserStatus:e.updateUserStatus,setProfilePhoto:e.setProfilePhoto,userId:e.userId,setProfileData:e.setProfileData,editMode:e.editMode,setEditModeProfile:e.setEditModeProfile}),Object(u.jsx)(fe,{})]})},xe=Object(V.d)(Object(j.b)((function(e){return{profile:e.profilePage.profile,userStatus:e.profilePage.userStatus,userId:e.auth.id,editMode:e.profilePage.editMode}}),(function(e){return{getProfile:function(t){return e(te(t))},setUserStatus:function(t){return e(function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.b.getStatus(e);case 2:r=t.sent,n(Q(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},updateUserStatus:function(t){return e(function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.b.updateStatus(e);case 2:0===t.sent.resultCode&&n(Q(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},setProfilePhoto:function(t){return e(function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.b.updateProfilePhoto(e);case 2:0===(r=t.sent).resultCode&&n($(r.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},setProfileData:function(t){e(function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n,r){var s,a,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=r().auth.id,t.next=3,m.b.updateProfileData(e);case 3:0===(a=t.sent).resultCode?(n(ee(!1)),n(te(s))):(i=a.messages[0],n(Object(H.a)("profileData",{_error:i})));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setEditModeProfile:function(t){e(ee(t))}}})),G,c.f)((function(e){return Object(r.useEffect)((function(){var t=e.match.params.userId;t||(t=e.userId),e.getProfile(t),e.setUserStatus(t)})),Object(u.jsx)(me,{isOwner:!e.match.params.userId,profile:e.profile,userStatus:e.userStatus,updateUserStatus:e.updateUserStatus,setProfilePhoto:e.setProfilePhoto,userId:e.userId,setProfileData:e.setProfileData,editMode:e.editMode,setEditModeProfile:e.setEditModeProfile})})),ve=function(e){return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("div",{className:"header__logo",children:"Social Network"}),Object(u.jsx)("div",{className:"header__auth",children:e.isAuth?Object(u.jsxs)("div",{className:"header__auth-login header__auth-login_loginned",children:[Object(u.jsx)("div",{children:e.login}),Object(u.jsx)("button",{onClick:e.logout,children:"Logout"})]}):Object(u.jsx)(o.b,{className:"header__auth-login",to:"/login",children:"Login"})})]})},_e=n(34),Ne=Object(j.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),(function(e){return{isLogged:function(){return e(Object(_e.b)())},logout:function(){return e(Object(_e.d)())}}}))((function(e){return Object(u.jsx)(ve,{isAuth:e.isAuth,login:e.login,logout:e.logout})})),Pe="app/INITIALIZED-SUCCESS",we={initialized:!1},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:return Object(O.a)(Object(O.a)({},e),{},{initialized:!0});default:return e}},Ce="dialogs/SEND-NEW-MESSAGE",ke={dialogsName:[{name:"Pavel",id:1,avatar:"https://cs3.livemaster.ru/zhurnalfoto/3/8/f/140723153856.jpg"},{name:"Alexey",id:2,avatar:"https://shutniki.club/wp-content/uploads/2020/01/Multyashnye_kartinki_s_devushkami__dlya_profilya_3_27181708.jpg"},{name:"Artem",id:3,avatar:"https://www.ejin.ru/wp-content/uploads/2018/10/kartinki_volka_na_avu_04-1.jpg"},{name:"Denis",id:4,avatar:"https://vraki.net/sites/default/files/inline/images/1_42.jpg"}],dialogsMessagesData:[{message:"Hey!",id:1},{message:"Hello!",id:2},{message:"Yo!",id:3},{message:"Olla!",id:4}],dialogsSendMessageValue:""},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce:var n={message:t.text,id:e.dialogsMessagesData.length+1};return Object(O.a)(Object(O.a)({},e),{},{dialogsMessagesData:[].concat(Object(g.a)(e.dialogsMessagesData),[n])});default:return e}},ye=function(e){return Object(u.jsx)("div",{className:"dialogs__messages-item",children:e.message})},Me=Object(se.a)({form:"sendMessage"})((function(e){return Object(u.jsxs)("form",{onSubmit:e.handleSubmit,className:"dialogs__send",children:[Object(u.jsx)(re.a,{name:"message",component:"textarea",cols:"60",rows:"5",className:"dialogs__send-text",placeholder:"Enter the text",maxLength:"140",type:"text"}),Object(u.jsx)("button",{className:"dialogs__send-btn",children:"Send"})]})})),Ie=function(e){var t=e.dialogsMessagesData.map((function(e){return Object(u.jsx)(ye,{message:e.message,id:e.id})}));return Object(u.jsxs)("div",{className:"dialogs__messages",children:[t,Object(u.jsx)(Me,{onSubmit:function(t){e.sendNewMessage(t.message)}})]})},Ue=Object(j.b)((function(e){return{dialogsMessagesData:e.dialogsPage.dialogsMessagesData,isAuth:e.auth.isAuth}}),(function(e){return{sendNewMessage:function(t){e(function(e){return{type:Ce,text:e}}(t))}}}))((function(e){return Object(u.jsx)(Ie,{dialogsMessagesData:e.dialogsMessagesData,isAuth:e.isAuth,sendNewMessage:e.sendNewMessage})})),De=function(e){return Object(u.jsxs)("div",{className:"dialogs__name-item",children:[Object(u.jsx)("img",{src:e.avatar,alt:"profile-avatar",className:"dialogs__name-avatar"}),Object(u.jsx)(o.b,{to:"/dialogs/"+e.id,className:"dialogs__name-name",activeClassName:"dialogs__name-name_active",children:e.name})]})},Ae=function(e){var t=e.dialogsName.map((function(e){return Object(u.jsx)(De,{avatar:e.avatar,name:e.name,id:e.id})}));return Object(u.jsx)("div",{className:"dialogs__name",children:t})},Te=Object(j.b)((function(e){return{dialogsName:e.dialogsPage.dialogsName}}),null)((function(e){return Object(u.jsx)(Ae,{dialogsName:e.dialogsName})})),Fe=G((function(e){return Object(u.jsxs)("div",{className:"dialogs",children:[Object(u.jsx)(Te,{}),Object(u.jsx)(Ue,{})]})})),ze=s.a.lazy((function(){return n.e(3).then(n.bind(null,277))})),Le=Object(j.b)((function(e){return{initialized:e.app.initialized}}),(function(e){return{initializedApp:function(){return e(function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t(Object(_e.b)()),e.next=3,n;case 3:t({type:Pe});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){return Object(r.useEffect)((function(){e.initializedApp()}),[]),e.initialized?Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(Ne,{}),Object(u.jsxs)("div",{className:"wrapper",children:[Object(u.jsx)(l,{}),Object(u.jsxs)("div",{className:"main",children:[Object(u.jsx)(c.b,{path:"/profile/:userId?",render:function(){return Object(u.jsx)(xe,{})}}),Object(u.jsx)(c.b,{path:"/dialogs",render:function(){return Object(u.jsx)(Fe,{})}}),Object(u.jsx)(c.b,{path:"/music",render:function(){return Object(u.jsx)(d,{})}}),Object(u.jsx)(c.b,{path:"/settings",render:function(){return Object(u.jsx)(f,{})}}),Object(u.jsx)(c.b,{path:"/users",render:function(){return Object(u.jsx)(B,{})}}),Object(u.jsx)(c.b,{path:"/login",render:function(){return Object(u.jsx)(s.a.Suspense,{fallback:Object(u.jsx)(L,{}),children:Object(u.jsx)(ze,{})})}})]})]})]}):Object(u.jsx)(L,{})})),Re=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,276)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),s(e),a(e),i(e)}))},Ge=n(120),Ve=n(117),Be=Object(V.c)({profilePage:ne,dialogsPage:Ee,usersPage:U,auth:_e.a,form:Ve.a,app:Se}),He=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.d,Je=Object(V.e)(Be,He(Object(V.a)(Ge.a)));i.a.render(Object(u.jsx)(o.a,{children:Object(u.jsx)(j.a,{store:Je,children:Object(u.jsx)(Le,{})})}),document.getElementById("root")),Re()},34:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return p}));var r=n(7),s=n.n(r),a=n(13),i=n(3),c=n(28),o=n(16),u="auth/SET-USER-AUTH",l="auth/GET-CAPTCHA-URL",d={id:null,login:null,email:null,isAuth:!1,captchaUrl:null},f=function(e,t,n,r){return{type:u,data:{id:e,login:t,email:n,isAuth:r}}},j=function(){return function(){var e=Object(a.a)(s.a.mark((function e(t){var n,r,a,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.isAuth();case 2:0===(n=e.sent).resultCode&&(r=n.data,a=r.email,i=r.id,c=r.login,t(f(i,c,a,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(e,t,n,r){return function(){var i=Object(a.a)(s.a.mark((function a(i){var u,l;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,o.a.login(e,t,n,r);case 3:0===(u=s.sent).resultCode?i(j()):(10===u.resultCode&&i(h()),l=u.messages[0],i(Object(c.a)("login",{_error:l})));case 5:case"end":return s.stop()}}),a)})));return function(e){return i.apply(this,arguments)}}()},p=function(){return function(){var e=Object(a.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.logout();case 2:0===e.sent.resultCode&&t(f(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(){return function(){var e=Object(a.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.getCaptchaUrl();case 2:n=e.sent,t((r=n.url,{type:l,captchaUrl:r}));case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(i.a)(Object(i.a)({},e),t.data);case l:return Object(i.a)(Object(i.a)({},e),{},{captchaUrl:t.captchaUrl});default:return e}}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var r=function(e){return function(t){return t&&t.length>e?"Max length is ".concat(e," symbols"):void 0}},s=function(e){return e?void 0:"Required"}}},[[275,1,2]]]);
//# sourceMappingURL=main.57c6cfb3.chunk.js.map