(this["webpackJsonpreact-first-project"]=this["webpackJsonpreact-first-project"]||[]).push([[0],{15:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(118),a=r.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"64e333df-e9d0-4115-b50f-b08967237296"}}),s={getProfile:function(e){return a.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return a.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return a.put("profile/status",{status:e}).then((function(e){return e.data}))},updateProfilePhoto:function(e){var t=new FormData;return t.append("image",e),a.put("profile/photo",t).then((function(e){return e.data}))},updateProfileData:function(e){return a.put("profile",e).then((function(e){return e.data}))}},i={getPages:function(e,t){return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},setPage:function(e,t){return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollow:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data}))},follow:function(e){return a.post("follow/".concat(e)).then((function(e){return e.data}))}},c={isAuth:function(){return a.get("auth/me").then((function(e){return e.data}))},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return a.post("auth/login",{captcha:e,email:t,password:n,rememberMe:r}).then((function(e){return e.data}))},logout:function(){return a.delete("auth/login").then((function(e){return e.data}))},getCaptchaUrl:function(){return a.get("security/get-captcha-url").then((function(e){return e.data}))}}},150:function(e,t,n){},151:function(e,t,n){},25:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var r=n(3),a=n(85),s=(n(1),n(0)),i=["input","meta"],c=["input","meta"],o=function(e){var t=e.input,n=e.meta,c=Object(a.a)(e,i),o=n.touched&&n.error;return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:o?"validate__post validate__post_body":"",children:Object(s.jsx)("textarea",Object(r.a)(Object(r.a)({},t),c))}),o&&Object(s.jsx)("div",{className:o?"validate__post validate__post_span":"",children:n.error})]})},u=function(e){var t=e.input,n=e.meta,i=Object(a.a)(e,c),o=n.touched&&n.error;return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:o?"validate__login validate__login_body":"",children:Object(s.jsx)("input",Object(r.a)(Object(r.a)({},t),i))}),o&&Object(s.jsx)("div",{className:o?"validate__login validate__login_span":"",children:n.error})]})}},275:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(60),i=n.n(s),c=(n(150),n(151),n(11)),o=n(16),u=n(0),l=function(){return Object(u.jsx)("nav",{className:"navbar",children:Object(u.jsxs)("ul",{className:"navbar__list",children:[Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/profile",className:"navbar__item",activeClassName:"navbar__item_active",children:"Profile"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/users",className:"navbar__item",activeClassName:"navbar__item_active",children:"Users"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{to:"/dialogs",className:"navbar__item",activeClassName:"navbar__item_active",children:"Dialogs"})})]})})},d=n(12),f=n(7),j=n.n(f),b=n(13),p=n(36),g=n(3),h=n(15),O="users/SUBSCRIBE",m="users/UNSUBSCRIBE",x="users/SET-USERS",v="users/SET-PAGE-NUMBER",_="users/SET-TOTAL-USERS-COUNT",P="users/TOGGLE-FETCHING",N="users/FOLLOWING-IN-PROGRESS",w={users:[],pageSize:50,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},S=function(e){return{type:O,userId:e}},C=function(e){return{type:m,userId:e}},k=function(e){return{type:x,users:e}},E=function(e){return{type:P,isFetching:e}},y=function(e,t){return{type:N,inProgress:e,userId:t}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(g.a)(Object(g.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(g.a)(Object(g.a)({},e),{},{followed:!0}):e}))});case m:return Object(g.a)(Object(g.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(g.a)(Object(g.a)({},e),{},{followed:!1}):e}))});case x:return Object(g.a)(Object(g.a)({},e),{},{users:Object(p.a)(t.users)});case v:return Object(g.a)(Object(g.a)({},e),{},{currentPage:t.pageNumber});case _:return Object(g.a)(Object(g.a)({},e),{},{totalUsersCount:t.usersCount});case P:return Object(g.a)(Object(g.a)({},e),{},{isFetching:t.isFetching});case N:return Object(g.a)(Object(g.a)({},e),{},{followingInProgress:t.inProgress?[].concat(Object(p.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},M=n(51),U=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],a=1;a<=t;a++)n.push(a);var s=Math.ceil(t/10),i=Object(r.useState)(1),c=Object(M.a)(i,2),o=c[0],l=c[1],d=10*(o-1)+1,f=10*o;return Object(u.jsxs)("div",{children:[o>1&&Object(u.jsx)("button",{onClick:function(){return l(o-1)},children:"PREV"}),n.filter((function(e){return e>=d&&e<=f})).map((function(t){return Object(u.jsx)("button",{className:e.currentPage===t?"users__page users__page_active":"users__page ",onClick:function(){return e.onPageChanged(t)},children:t})})),s>o&&Object(u.jsx)("button",{onClick:function(){return l(o+1)},children:"NEXT"})]})},D=n.p+"static/media/user-logo.c3bf08ee.png",A=function(e){return Object(u.jsxs)("div",{className:"user",children:[Object(u.jsxs)("div",{className:"user__action",children:[Object(u.jsx)(o.b,{to:"profile/".concat(e.user.id),children:Object(u.jsx)("img",{src:null!=e.user.photos.small?e.user.photos.small:D,alt:"avatar",className:"user__avatar"})}),e.user.followed?Object(u.jsx)("button",{disabled:e.followingInProgress.some((function(t){return t===e.user.id})),onClick:function(){e.unsubscribe(e.user.id)},className:"user__btn",children:"Unfollow"}):Object(u.jsx)("button",{disabled:e.followingInProgress.some((function(t){return t===e.user.id})),onClick:function(){e.subscribe(e.user.id)},className:"user__btn",children:"Follow"})]}),Object(u.jsx)("div",{className:"user__info",children:Object(u.jsxs)("div",{className:"user__descr",children:[Object(u.jsx)("div",{className:"user__descr-name",children:e.user.name}),Object(u.jsx)("div",{className:"user__descr-status",children:e.user.status})]})})]})},T=function(e){return Object(u.jsxs)("div",{className:"users",children:[Object(u.jsx)(U,{currentPage:e.currentPage,onPageChanged:e.onPageChanged,totalUsersCount:e.totalUsersCount,pageSize:e.pageSize}),e.users.map((function(t){return Object(u.jsx)(A,{user:t,followingInProgress:e.followingInProgress,unsubscribe:e.unsubscribe,subscribe:e.subscribe})}))]})},F=function(e){return Object(u.jsx)("div",{className:"preloader",children:Object(u.jsx)("div",{className:"spinner"})})},z=function(e){return{isAuth:e.auth.isAuth}},L=function(e){return Object(d.b)(z)((function(t){return t.isAuth?Object(u.jsx)(e,Object(g.a)({},t)):Object(u.jsx)(c.a,{to:"/login"})}))},R=n(10),G=Object(R.d)(Object(d.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),(function(e){return{subscribe:function(t){return e(function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(y(!0,e)),t.next=3,h.c.follow(e);case 3:0===t.sent.resultCode&&n(S(e)),n(y(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},unsubscribe:function(t){return e(function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(y(!0,e)),t.next=3,h.c.unfollow(e);case 3:0===t.sent.resultCode&&n(C(e)),n(y(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},getUsers:function(t,n){return e(function(e,t){return function(){var n=Object(b.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(E(!0)),n.next=3,h.c.getPages(e,t);case 3:a=n.sent,r(k(a.items)),r((s=a.totalCount,{type:_,usersCount:s})),r(E(!1));case 7:case"end":return n.stop()}var s}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))},changedPage:function(t,n){return e(function(e,t){return function(){var n=Object(b.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:v,pageNumber:e}),r(E(!0)),n.next=4,h.c.setPage(e,t);case 4:a=n.sent,r(k(a.items)),r(E(!1));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}})))((function(e){Object(r.useEffect)((function(){e.getUsers(e.currentPage,e.pageSize)}),[]);return Object(u.jsxs)(u.Fragment,{children:[e.isFetching?Object(u.jsx)(F,{}):null,Object(u.jsx)(T,{totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:function(t){e.changedPage(t,e.pageSize)},users:e.users,unsubscribe:e.unsubscribe,subscribe:e.subscribe,followingInProgress:e.followingInProgress,toggleFollowingProgress:e.toggleFollowingProgress})]})})),V=n(28),B="profile/SET-USER-PROFILE",H="profile/SET-STATUS",J="profile/UPDATE-STATUS",Y="profile/ADD-NEW-POST",W="profile/SET-PROFILE-PHOTO",X="profile/SET-EDIT-MODE-PROFILE",q={profile:null,postsData:[{text:"Hi!",id:1,likeCount:24},{text:"Yo!",id:2,likeCount:32},{text:"Olla!",id:3,likeCount:48}],postTextareaValue:"",userStatus:"",editMode:!1},K=function(e){return{type:H,status:e}},Z=function(e){return{type:W,photo:e}},Q=function(e){return{type:X,editMode:e}},$=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.b.getProfile(e);case 2:r=t.sent,n({type:B,profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(g.a)(Object(g.a)({},e),{},{profile:t.profile});case H:case J:return Object(g.a)(Object(g.a)({},e),{},{userStatus:t.status});case Y:var n={text:t.text,id:e.postsData.length+1,likeCount:0};return Object(g.a)(Object(g.a)({},e),{},{postsData:[].concat(Object(p.a)(e.postsData),[n])});case W:return Object(g.a)(Object(g.a)({},e),{},{profile:Object(g.a)(Object(g.a)({},e.profile),{},{photos:Object(g.a)(Object(g.a)({},e.profile.photos),{},{small:t.photo,large:t.photo})})});case X:return Object(g.a)(Object(g.a)({},e),{},{editMode:t.editMode});default:return e}},te=n(115),ne=n(116),re=n(25),ae=n(35),se=Object(ae.a)(10),ie=Object(ne.a)({form:"addPost"})((function(e){return Object(u.jsxs)("form",{className:"posts__add",onSubmit:e.handleSubmit,children:[Object(u.jsx)(te.a,{className:"posts__text",component:re.b,name:"newPostText",cols:"60",rows:"5",placeholder:"Enter the text",validate:[se,ae.b]}),Object(u.jsx)("button",{className:"posts__publish",children:"Add Post"})]})})),ce=function(e){return Object(u.jsxs)("div",{className:"like",children:[Object(u.jsx)("img",{src:"https://www.pinclipart.com/picdir/big/48-486837_thumbs-up-thumbs-up-icon-font-awesome-clipart.png",alt:"like",className:"like__icon"}),Object(u.jsx)("div",{className:"like__count",children:e.count})]})},oe=function(e){return Object(u.jsxs)("div",{className:"post",children:[Object(u.jsx)("img",{src:"https://pixelbox.ru/wp-content/uploads/2020/12/avatar-youtube-10.jpg",alt:"avatar",className:"post__avatar"}),Object(u.jsx)("div",{className:"post__text",children:e.text}),Object(u.jsx)(ce,{count:e.likeCount})]})},ue=function(e){var t=e.posts.map((function(e){return Object(u.jsx)(oe,{text:e.text,id:e.id,likeCount:e.likeCount},"".concat(e,"_").concat(e.id))}));return Object(u.jsxs)("div",{className:"posts",children:[Object(u.jsx)("h3",{className:"posts__header",children:"Posts"}),Object(u.jsx)(ie,{onSubmit:function(t){e.addNewPost(t.newPostText)}}),t]})},le=Object(d.b)((function(e){return{posts:e.profilePage.postsData,postTextareaValue:e.profilePage.postTextareaValue}}),(function(e){return{addNewPost:function(t){e(function(e){return{type:Y,text:e}}(t))}}}))((function(e){return Object(u.jsx)(ue,{posts:e.posts,postTextareaValue:e.postTextareaValue,addNewPost:e.addNewPost})})),de=function(e){return Object(u.jsxs)("div",{className:"avatar",children:[Object(u.jsx)("img",{src:null!=e.profile.photos.large?e.profile.photos.large:D,alt:"avatar",className:"avatar__img"}),e.isOwner&&Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{className:"visually-hidden",type:"file",id:"file",onChange:function(t){t.target.files.length&&e.setProfilePhoto(t.target.files[0])}}),Object(u.jsx)("button",{className:"avatar__btn",children:Object(u.jsx)("label",{for:"file",children:"Choose avatar"})})]})]})},fe=Object(ne.a)({form:"profileData"})((function(e){return Object(u.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(u.jsx)("button",{children:"Save"}),e.error&&Object(u.jsx)("div",{className:"validate__login_invalid-data",children:e.error}),Object(u.jsx)(te.a,{component:re.a,className:"login__form-item",placeholder:"Full name",name:"fullName",validate:[ae.b]}),Object(u.jsx)(te.a,{component:re.a,className:"login__form-item",placeholder:"About me",name:"aboutMe",validate:[ae.b]}),Object(u.jsxs)("div",{className:"login__form-item",children:["Looking for a job:",Object(u.jsx)(te.a,{component:"Input",type:"checkbox",name:"lookingForAJob"})]}),Object(u.jsx)(te.a,{component:re.a,className:"login__form-item",placeholder:"Desciption",name:"lookingForAJobDescription",validate:[ae.b]}),Object(u.jsx)("div",{children:Object(u.jsx)("b",{children:"Contacts:"})}),Object(u.jsx)(te.a,{component:re.a,className:"login__form-item",placeholder:"Facebook",name:"contacts.facebook"}),Object(u.jsx)(te.a,{component:re.a,className:"login__form-item",placeholder:"Instagram",name:"contacts.instagram"}),Object(u.jsx)(te.a,{component:re.a,className:"login__form-item",placeholder:"Github",name:"contacts.github"})]})})),je=function(e){var t=Object(r.useState)(!1),n=Object(M.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(e.userStatus),c=Object(M.a)(i,2),o=c[0],l=c[1],d=function(){s(!0)};return Object(r.useEffect)((function(){l(e.userStatus)}),[e.userStatus]),a?Object(u.jsxs)("div",{onClick:d,className:"profile-info__descr-item",children:["Status:"," ",Object(u.jsx)("input",{onBlur:function(){s(!1),e.updateUserStatus(o)},onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,value:o})]}):Object(u.jsx)("div",{onClick:d,className:"profile-info__descr-item",children:e.userStatus?"Status: ".concat(e.userStatus):"\u0421lick here to set the status"})},be=function(e){return Object(u.jsxs)("div",{children:[e.isOwner&&Object(u.jsx)("button",{onClick:e.activeEditMode,children:"Edit"}),Object(u.jsxs)("div",{className:"profile-info__descr-item",children:["Fullname: ",e.profile.fullName]}),e.profile.aboutMe?Object(u.jsxs)("div",{className:"profile-info__descr-item",children:["About me: ",e.profile.aboutMe]}):"",Object(u.jsxs)("div",{className:"profile-info__descr-item",children:["Looking for a job: ",e.profile.lookingForAJob?"Yes":"No"]}),e.profile.lookingForAJob?Object(u.jsxs)("div",{className:"profile-info__descr-item",children:["Description: ",e.profile.lookingForAJobDescription]}):"",Object(u.jsx)("div",{className:"profile-info__descr-item",children:Object(u.jsx)("b",{children:"Contacts:"})}),e.profile.contacts.facebook&&Object(u.jsxs)("div",{className:"profile-info__descr-item__facebook",children:["Facebook: ",e.profile.contacts.facebook]}),e.profile.contacts.instagram&&Object(u.jsxs)("div",{className:"profile-info__descr-item__instagram",children:["Instagram: ",e.profile.contacts.instagram]}),e.profile.contacts.github&&Object(u.jsxs)("div",{className:"profile-info__descr-item__github",children:["Git: ",e.profile.contacts.github]})]})},pe=function(e){return Object(u.jsxs)("div",{className:"profile-info__descr",children:[e.editMode?Object(u.jsx)(fe,{initialValues:e.profile,onSubmit:function(t){e.setProfileData(t)}}):Object(u.jsx)(be,{isOwner:e.isOwner,activeEditMode:function(){e.setEditModeProfile(!0)},profile:e.profile}),Object(u.jsx)(je,{isOwner:e.isOwner,userStatus:e.userStatus,updateUserStatus:e.updateUserStatus})]})},ge=function(e){return e.profile?Object(u.jsxs)("div",{className:"profile-info",children:[Object(u.jsx)(de,{profile:e.profile,isOwner:e.isOwner,setProfilePhoto:e.setProfilePhoto}),Object(u.jsx)(pe,{isOwner:e.isOwner,userId:e.userId,profile:e.profile,userStatus:e.userStatus,updateUserStatus:e.updateUserStatus,setProfileData:e.setProfileData,editMode:e.editMode,setEditModeProfile:e.setEditModeProfile})]}):Object(u.jsx)(F,{})},he=function(e){return Object(u.jsxs)("div",{className:"profile",children:[Object(u.jsx)(ge,{isOwner:e.isOwner,profile:e.profile,userStatus:e.userStatus,updateUserStatus:e.updateUserStatus,setProfilePhoto:e.setProfilePhoto,userId:e.userId,setProfileData:e.setProfileData,editMode:e.editMode,setEditModeProfile:e.setEditModeProfile}),Object(u.jsx)(le,{})]})},Oe=Object(R.d)(Object(d.b)((function(e){return{profile:e.profilePage.profile,userStatus:e.profilePage.userStatus,userId:e.auth.id,editMode:e.profilePage.editMode}}),(function(e){return{getProfile:function(t){return e($(t))},setUserStatus:function(t){return e(function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.b.getStatus(e);case 2:r=t.sent,n(K(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},updateUserStatus:function(t){return e(function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.b.updateStatus(e);case 2:0===t.sent.resultCode&&n(K(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},setProfilePhoto:function(t){return e(function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.b.updateProfilePhoto(e);case 2:0===(r=t.sent).resultCode&&n(Z(r.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},setProfileData:function(t){e(function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n,r){var a,s,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.id,t.next=3,h.b.updateProfileData(e);case 3:0===(s=t.sent).resultCode?(n(Q(!1)),n($(a))):(i=s.messages[0],n(Object(V.a)("profileData",{_error:i})));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setEditModeProfile:function(t){e(Q(t))}}})),L,c.f)((function(e){return Object(r.useEffect)((function(){var t=e.match.params.userId;t||(t=e.userId),e.getProfile(t),e.setUserStatus(t)})),Object(u.jsx)(he,{isOwner:!e.match.params.userId,profile:e.profile,userStatus:e.userStatus,updateUserStatus:e.updateUserStatus,setProfilePhoto:e.setProfilePhoto,userId:e.userId,setProfileData:e.setProfileData,editMode:e.editMode,setEditModeProfile:e.setEditModeProfile})})),me=function(e){return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("div",{className:"header__logo",children:"Social Network"}),Object(u.jsx)("div",{className:"header__auth",children:e.isAuth?Object(u.jsxs)("div",{className:"header__auth-login header__auth-login_loginned",children:[Object(u.jsx)("div",{children:e.login}),Object(u.jsx)("button",{onClick:e.logout,children:"Logout"})]}):Object(u.jsx)(o.b,{className:"header__auth-login",to:"/login",children:"Login"})})]})},xe=n(34),ve=Object(d.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),(function(e){return{isLogged:function(){return e(Object(xe.b)())},logout:function(){return e(Object(xe.d)())}}}))((function(e){return Object(u.jsx)(me,{isAuth:e.isAuth,login:e.login,logout:e.logout})})),_e="app/INITIALIZED-SUCCESS",Pe={initialized:!1},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:return Object(g.a)(Object(g.a)({},e),{},{initialized:!0});default:return e}},we="dialogs/SEND-NEW-MESSAGE",Se={dialogsName:[{name:"Pavel",id:1,avatar:"https://cs3.livemaster.ru/zhurnalfoto/3/8/f/140723153856.jpg"},{name:"Alexey",id:2,avatar:"https://shutniki.club/wp-content/uploads/2020/01/Multyashnye_kartinki_s_devushkami__dlya_profilya_3_27181708.jpg"},{name:"Artem",id:3,avatar:"https://www.ejin.ru/wp-content/uploads/2018/10/kartinki_volka_na_avu_04-1.jpg"},{name:"Denis",id:4,avatar:"https://vraki.net/sites/default/files/inline/images/1_42.jpg"}],dialogsMessagesData:[{message:"Hey!",id:1},{message:"Hello!",id:2},{message:"Yo!",id:3},{message:"Olla!",id:4}],dialogsSendMessageValue:""},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:var n={message:t.text,id:e.dialogsMessagesData.length+1};return Object(g.a)(Object(g.a)({},e),{},{dialogsMessagesData:[].concat(Object(p.a)(e.dialogsMessagesData),[n])});default:return e}},ke=function(e){return Object(u.jsx)("div",{className:"dialogs__messages-item",children:e.message})},Ee=Object(ne.a)({form:"sendMessage"})((function(e){return Object(u.jsxs)("form",{onSubmit:e.handleSubmit,className:"dialogs__send",children:[Object(u.jsx)(te.a,{name:"message",component:"textarea",cols:"60",rows:"5",className:"dialogs__send-text",placeholder:"Enter the text",maxLength:"140",type:"text"}),Object(u.jsx)("button",{className:"dialogs__send-btn",children:"Send"})]})})),ye=function(e){var t=e.dialogsMessagesData.map((function(e){return Object(u.jsx)(ke,{message:e.message,id:e.id})}));return Object(u.jsxs)("div",{className:"dialogs__messages",children:[t,Object(u.jsx)(Ee,{onSubmit:function(t){e.sendNewMessage(t.message)}})]})},Ie=Object(d.b)((function(e){return{dialogsMessagesData:e.dialogsPage.dialogsMessagesData,isAuth:e.auth.isAuth}}),(function(e){return{sendNewMessage:function(t){e(function(e){return{type:we,text:e}}(t))}}}))((function(e){return Object(u.jsx)(ye,{dialogsMessagesData:e.dialogsMessagesData,isAuth:e.isAuth,sendNewMessage:e.sendNewMessage})})),Me=function(e){return Object(u.jsxs)("div",{className:"dialogs__name-item",children:[Object(u.jsx)("img",{src:e.avatar,alt:"profile-avatar",className:"dialogs__name-avatar"}),Object(u.jsx)(o.b,{to:"/dialogs/"+e.id,className:"dialogs__name-name",activeClassName:"dialogs__name-name_active",children:e.name})]})},Ue=function(e){var t=e.dialogsName.map((function(e){return Object(u.jsx)(Me,{avatar:e.avatar,name:e.name,id:e.id})}));return Object(u.jsx)("div",{className:"dialogs__name",children:t})},De=Object(d.b)((function(e){return{dialogsName:e.dialogsPage.dialogsName}}),null)((function(e){return Object(u.jsx)(Ue,{dialogsName:e.dialogsName})})),Ae=L((function(e){return Object(u.jsxs)("div",{className:"dialogs",children:[Object(u.jsx)(De,{}),Object(u.jsx)(Ie,{})]})})),Te=a.a.lazy((function(){return n.e(3).then(n.bind(null,277))})),Fe=Object(d.b)((function(e){return{initialized:e.app.initialized}}),(function(e){return{initializedApp:function(){return e(function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t(Object(xe.b)()),e.next=3,n;case 3:t({type:_e});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){return Object(r.useEffect)((function(){e.initializedApp()}),[]),e.initialized?Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(ve,{}),Object(u.jsxs)("div",{className:"wrapper",children:[Object(u.jsx)(l,{}),Object(u.jsxs)("div",{className:"main",children:[Object(u.jsx)(c.b,{path:"/profile/:userId?",render:function(){return Object(u.jsx)(Oe,{})}}),Object(u.jsx)(c.b,{path:"/dialogs",render:function(){return Object(u.jsx)(Ae,{})}}),Object(u.jsx)(c.b,{path:"/users",render:function(){return Object(u.jsx)(G,{})}}),Object(u.jsx)(c.b,{path:"/login",render:function(){return Object(u.jsx)(a.a.Suspense,{fallback:Object(u.jsx)(F,{}),children:Object(u.jsx)(Te,{})})}})]})]})]}):Object(u.jsx)(F,{})})),ze=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,276)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),s(e),i(e)}))},Le=n(120),Re=n(117),Ge=Object(R.c)({profilePage:ee,dialogsPage:Ce,usersPage:I,auth:xe.a,form:Re.a,app:Ne}),Ve=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||R.d,Be=Object(R.e)(Ge,Ve(Object(R.a)(Le.a)));i.a.render(Object(u.jsx)(o.a,{children:Object(u.jsx)(d.a,{store:Be,children:Object(u.jsx)(Fe,{})})}),document.getElementById("root")),ze()},34:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return p}));var r=n(7),a=n.n(r),s=n(13),i=n(3),c=n(28),o=n(15),u="auth/SET-USER-AUTH",l="auth/GET-CAPTCHA-URL",d={id:null,login:null,email:null,isAuth:!1,captchaUrl:null},f=function(e,t,n,r){return{type:u,data:{id:e,login:t,email:n,isAuth:r}}},j=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.isAuth();case 2:0===(n=e.sent).resultCode&&(r=n.data,s=r.email,i=r.id,c=r.login,t(f(i,c,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(e,t,n,r){return function(){var i=Object(s.a)(a.a.mark((function s(i){var u,l;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,o.a.login(e,t,n,r);case 3:0===(u=a.sent).resultCode?i(j()):(10===u.resultCode&&i(g()),l=u.messages[0],i(Object(c.a)("login",{_error:l})));case 5:case"end":return a.stop()}}),s)})));return function(e){return i.apply(this,arguments)}}()},p=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.logout();case 2:0===e.sent.resultCode&&t(f(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.getCaptchaUrl();case 2:n=e.sent,t((r=n.url,{type:l,captchaUrl:r}));case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(i.a)(Object(i.a)({},e),t.data);case l:return Object(i.a)(Object(i.a)({},e),{},{captchaUrl:t.captchaUrl});default:return e}}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(e){return function(t){return t&&t.length>e?"Max length is ".concat(e," symbols"):void 0}},a=function(e){return e?void 0:"Required"}}},[[275,1,2]]]);
//# sourceMappingURL=main.659a9f70.chunk.js.map